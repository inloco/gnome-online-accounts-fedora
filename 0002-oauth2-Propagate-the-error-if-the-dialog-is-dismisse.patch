From e3622e19ab8b4308be54c2d15bc3fbf304427d5f Mon Sep 17 00:00:00 2001
From: Debarshi Ray <debarshir@gnome.org>
Date: Fri, 27 Sep 2013 15:06:47 +0200
Subject: [PATCH 2/2] oauth2: Propagate the error if the dialog is dismissed
 during refresh

Fallout from a6ce50a8ab89242d7d25611c3828033e854a263d

Fixes: https://bugzilla.gnome.org/708832
---
 src/goabackend/goaoauth2provider.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/goabackend/goaoauth2provider.c b/src/goabackend/goaoauth2provider.c
index 138bde3..b545535 100644
--- a/src/goabackend/goaoauth2provider.c
+++ b/src/goabackend/goaoauth2provider.c
@@ -1405,6 +1405,9 @@ goa_oauth2_provider_refresh_account (GoaProvider  *_provider,
   ret = TRUE;
 
  out:
+  if (priv->error != NULL)
+    g_propagate_error (error, priv->error);
+
   gtk_widget_destroy (dialog);
   return ret;
 }
-- 
1.8.3.1

